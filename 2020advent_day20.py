
inp = '''Tile 1051:
#...#...##
.....#....
....#.....
....#.....
.....##...
.......#.#
#.......##
..#..#....
#.#.#....#
###.##.#.#

Tile 3461:
##.#####.#
.....#..##
...#....##
#.#.......
..........
..###..##.
......#...
##....#...
.#......#.
..#.###.#.

Tile 3209:
.##.#.###.
#...#...##
..........
##........
#...#.....
#..#.....#
##...#..##
##.....#.#
.#..##....
..###..###

Tile 2039:
..#.#.###.
#..#..####
#...#....#
##.#..#...
.........#
#......#.#
#.......##
#...#....#
#......#.#
..##.#..#.

Tile 1579:
.####...##
...#....#.
.##.#..#.#
#....##.##
#....#.#.#
..##......
##.....#..
#...#.....
####......
#..######.

Tile 2503:
##.#.....#
.......#..
#........#
#....#.#..
#...##....
#.#..#..#.
#..###....
..#....###
...#..#..#
.#.#.....#

Tile 2719:
#.####..##
###.......
##.#.....#
#..###.#..
.........#
.........#
##........
##........
#..#...#..
.##..#.#.#

Tile 2957:
.####..###
###......#
#.#......#
#.##......
#.##.#..#.
#..##..#.#
#..#..#...
#.#....#..
.....#.#..
######.###

Tile 2777:
.#.##.##.#
..........
#.........
#.#...#...
#.##....#.
........##
..........
........##
#.....#...
#.#..#.###

Tile 3847:
#.#.#####.
....#.....
..........
#.......##
#.........
#.........
##....#...
###.#.....
#.......#.
.#.##...#.

Tile 3581:
#.#..#..#.
#.#..#....
.#.......#
#........#
.........#
#.........
..#.......
..#.......
#..#......
..#..#####

Tile 1373:
####.##.#.
#...#..###
##....#...
...#.....#
#.##.....#
......#...
..#....#..
#..###.##.
#....#.##.
.###.#.#.#

Tile 3467:
###..#...#
..#.....##
...#.....#
.....#...#
.#.#...#.#
##.#...##.
...##....#
#.........
.#....#...
#...##..#.

Tile 3889:
..#.#...##
#.......##
#.........
#.........
...#.....#
.......#.#
...#......
#........#
#........#
#####.#...

Tile 1361:
.....#..#.
....#.#.#.
....#....#
#..#.##.#.
#...#....#
...####..#
....#.#..#
.......#..
...#.##..#
#..#..##..

Tile 3631:
.##..#.###
#.##.....#
#....###..
.......###
........#.
#.....#..#
......#..#
.#.#..#...
#........#
#..#.##.#.

Tile 2243:
.....#.###
.........#
.......#..
..##......
....#.....
..........
#......#..
#....#...#
##.....#.#
##...##.##

Tile 1367:
#.#..#..##
##......#.
#....#.#.#
.##....#.#
...#....#.
.......##.
##..#....#
........#.
.....#....
.###......

Tile 1451:
.#..####.#
.....#...#
..........
####......
#.#....#..
.#.#...##.
#........#
#...###..#
#.....#..#
#.##.#####

Tile 3967:
######.###
##.......#
#.#......#
#..#......
##.#..#.#.
#.#.......
###..#...#
.#.......#
..#...#..#
#..##.###.

Tile 2341:
##.....##.
..........
........#.
#.........
#........#
###.#.##.#
#.##....##
........#.
#.....##..
#..##..##.

Tile 2797:
##.#.#..##
....#.....
#.....#...
#........#
#...#.###.
...#...#.#
#.........
..........
##.......#
..#.###.##

Tile 1979:
..##.#....
#..##.....
..#.##.###
......#...
.....#....
##....#...
...###....
#..#.#.###
..#......#
..#..#.#..

Tile 3217:
#.#...##.#
#.........
#..#..#.##
#.#...###.
.......###
..####....
#........#
##....#..#
#.....#..#
..##.#####

Tile 3709:
##..#..###
#.#......#
###.#.....
......#...
.#.#......
#.##..#...
#........#
.#.#......
#.#......#
.##....###

Tile 3463:
.#.###..#.
#..#......
#.......##
....#.....
##..#..#..
#..#...##.
#..#......
.....#.#..
....#....#
....#..#.#

Tile 2267:
.#####....
.....###.#
##.##.....
#.##.#...#
.........#
##.....#..
#....#...#
.........#
##........
##...#.##.

Tile 1409:
.#.#.#.###
...###..##
#........#
...#.....#
......#..#
#.........
#.....##.#
##....#..#
#....#...#
..####..#.

Tile 1109:
..###.###.
#....##...
#.........
....###..#
.......#.#
.......#.#
##.....#..
##.......#
...#.....#
.###...#.#

Tile 2333:
##.#.##.#.
.......#..
...#.#.#..
...#.#.#.#
...#..#...
.##......#
.......#..
........#.
##........
.#.#..#...

Tile 2113:
##.#.###.#
....#....#
#.......##
.........#
..#......#
....#.....
#...##..#.
...####..#
###....###
.###.....#

Tile 2161:
..#.#.####
#......#..
........##
...#......
#...#.....
..........
.#.#..###.
.......#.#
.........#
#.....####

Tile 1697:
.#....####
#......#..
#..#.....#
......##..
.....#....
..#.......
.##.......
#######..#
.##..#.#.#
.###.#.##.

Tile 1151:
#..##..#.#
...#..#..#
...#....#.
#.#.....#.
.##..#.#..
..#..#.#..
..##....##
.....#...#
#....#...#
.####.##..

Tile 2089:
.##..#.#.#
....#.....
#......#.#
..........
.....#..#.
..#.#.#..#
#...#....#
#..#.#....
.....#..#.
##...#.#.#

Tile 1423:
###.##..##
#.#..###..
..#.##.###
##....##..
#....##..#
#.#.#.....
#.......#.
#......#..
#..#.....#
#..#.##.#.

Tile 1861:
####.....#
#......#..
...##.#.##
##.......#
.#...#...#
..#.......
#.........
#....##..#
##..#....#
##...###.#

Tile 3659:
###.##..##
##........
.........#
#...##...#
#..#..#.##
#.....#.#.
##..##....
......#..#
....#.....
#####.####

Tile 2141:
#.....#.#.
##...#..#.
.#........
#......#..
........##
....#.....
#........#
#........#
#...#...##
#.####..#.

Tile 3779:
.##.#.#...
#.....#..#
.........#
.#........
..#..#...#
#...#.#...
.....#.##.
..#....#.#
....#....#
######.##.

Tile 2027:
.##.####.#
#......###
#.......#.
#..##.....
..#...#...
#..####..#
#...#.....
#..###....
#.......#.
..#.#.####

Tile 1543:
#...#.#.#.
.#.#......
....#....#
.#........
#.##.#...#
#.........
....#....#
#.......#.
#.....####
##.#.#...#

Tile 2857:
.#.##...##
.#....##.#
..#......#
#...#.....
..........
.........#
###.#....#
##........
....#..#..
##.##.##.#

Tile 3413:
##...###..
#.......##
#........#
#..#......
......#.#.
..........
........#.
#....#....
#....#.#..
.##..#..##

Tile 1453:
..##..#...
#.........
#.........
...#.....#
#.........
#.#.......
....##....
...##....#
..#..#...#
.##.#...#.

Tile 2357:
##.###...#
.........#
..#...#...
#..##....#
#....##..#
#...#.....
.#..#....#
#....#..##
....#...##
#.###.####

Tile 1597:
....##.#..
...#.....#
#......#..
....###.#.
.....##.##
...#......
#......#..
.#......#.
##.......#
####......

Tile 2213:
##.##.#...
#.......#.
....#....#
#......###
.##......#
.#.......#
#........#
#.........
##.#......
..#.#...##

Tile 3529:
.......##.
.#.......#
#.........
.#........
......#..#
.#...#..#.
#.....##.#
.#.#..#..#
.........#
##...#.##.

Tile 2741:
.#####..#.
##....#...
#.#.......
##.#......
#.........
.........#
.........#
##.#..#..#
#.......#.
#.##.##.#.

Tile 2011:
....###.##
#.###.#..#
.#..##....
..........
#.#.##...#
.........#
#...#....#
......#.##
........#.
#.###..#..

Tile 2791:
#.####.###
#..#...#..
.#........
.#..#...#.
##...#....
#...#.....
..#......#
##.......#
#.........
..##..####

Tile 3301:
.#..#.##.#
....#...##
#..#.....#
..........
#.....#...
.#####...#
#.#...#..#
##....#...
.#....#...
####.#..#.

Tile 3089:
#.###.....
......#..#
..##.#.#.#
...#...#.#
#..#..##..
#.#.#.....
#........#
#...##.##.
#.#...#..#
###..#....

Tile 1871:
..##...#.#
###...#..#
##...#....
...#..##..
#....##..#
.#.......#
..#..#####
#.###..#..
..#...#...
...#.###.#

Tile 2579:
...##....#
#.....####
.###.#..##
###.#....#
...#......
#..####.##
#...####..
#...#.....
...#......
...#.##...

Tile 2269:
....#.##..
#..#.#...#
....#....#
.........#
........#.
#....#...#
##.......#
#........#
...#....##
##..##...#

Tile 3643:
####.##.#.
.......##.
...#..#.#.
.........#
..#.##....
.#...##..#
..#....#..
....#..#..
##...##..#
..#.####.#

Tile 2887:
.#..#..###
##....#.##
#..#..#...
.........#
#.........
###.#.#...
#........#
##.#.#....
#.........
##.#.#.###

Tile 1297:
.###.....#
...#.##...
.......#.#
...#......
#.#...#...
...#......
..##..###.
##..######
#....#....
..##...#..

Tile 3433:
###.#.#..#
.#.....#.#
#....#..#.
..###..#.#
...#....#.
#.........
.#.....#.#
#.....#..#
..#.......
#...#..#.#

Tile 2473:
....##..#.
....#....#
..#.......
##.#...#.#
#......#.#
..#......#
#...#..#..
.....#.#.#
....####.#
###.###.#.

Tile 1433:
###.#.###.
#.#.#.....
#........#
#..##....#
#........#
#...#.#...
#......#..
#.........
......#...
.....#.###

Tile 2953:
.######.##
....#..#..
..........
...#......
..#......#
#........#
.##.....##
##........
##......#.
.###..##..

Tile 3613:
#.###.#...
#.........
..........
#.......##
#.........
##....#...
##......#.
..#......#
#...##...#
.#.#..#...

Tile 1999:
#.#####...
.........#
#....#.#..
#.....##.#
#....##.#.
##...#...#
#....##...
........##
.....##..#
###.#.#...

Tile 1279:
.##..##..#
.#.......#
.#..#..#..
.##...####
....#.#.##
#........#
#..#.....#
##.......#
..##.....#
.##......#

Tile 1657:
....#....#
#..#....##
##.......#
#....##.#.
#.#.......
#..#.....#
#.#.#.#...
.#........
##.......#
##.####...

Tile 3259:
###.###.#.
.#...#....
....#....#
........##
...#..#.#.
######...#
#..#####.#
.#...#....
#.###.#...
.#.##.#...

Tile 3527:
.#...##.##
...##.#..#
..##...#..
.#..#..#..
#........#
#....#..#.
.#...##...
#....##...
#..#......
....#.####

Tile 2971:
.#..#.##.#
..........
#......#.#
#.........
........##
#........#
..#......#
#..##....#
#...#..#..
####..##.#

Tile 3533:
.####.#.##
#.#.......
#........#
..........
..#......#
..........
###..#...#
##.......#
##......#.
...#.#.##.

Tile 1571:
#.#....#..
.#....#..#
#.....##..
#......###
.#......#.
.#.....#.#
...#..#..#
###.##..##
###......#
#..##.#.##

Tile 1553:
.#.#.#.###
#.##.....#
#.#.......
..#......#
#.......##
#.....#..#
#.....##..
.#.......#
#.......##
#.###.##.#

Tile 1619:
.##.#.#.##
##..#.#...
#.....##..
..........
#....##..#
##....#..#
#.##..####
#....#.#.#
...#.....#
.##.###.##

Tile 2843:
...#.##.#.
..........
..........
##...##..#
....##....
....#..#.#
.....#..#.
......#.#.
#.....##.#
#.#..##.##

Tile 3541:
##.##.##..
#....##.##
.....###.#
#..#...#..
#.#..##...
#......#.#
##.....#..
#..#.##...
..#...#...
#.##..#.##

Tile 2087:
.###.#.#.#
##.#....#.
#.##......
....#....#
..........
.##.#....#
#..#.#...#
##.#.#.#..
#.#.....#.
#.##....#.

Tile 2711:
###..##..#
.........#
#....#....
......#..#
.#......##
###..##.#.
###.#.....
#.........
..#......#
##........

Tile 2143:
##.#.#..#.
.......###
......##..
####..#...
#.###....#
...#......
##....##.#
#.........
#.#.......
.###..#.##

Tile 1877:
#..###..##
.##.....##
.#...#...#
##..#..#.#
....#....#
#........#
....#.....
.#....#.##
..#...#...
#.#.......

Tile 3943:
#.#.#.#.##
..#.....##
..###.....
..........
#.........
#..#.....#
#..#......
.#..#....#
#.#..#...#
#.#..##.##

Tile 1319:
.#.#.#####
#........#
#.......##
#.#....#.#
...#.#.#..
...#.....#
#.###..##.
....#.....
..........
.####....#

Tile 1483:
...#..##..
.......#..
#..##.....
...##....#
.#...##.##
#.........
.........#
#.#...#...
#.#...#...
..###.###.

Tile 2203:
..#.####.#
#....#..##
.....#...#
#...#.#...
#...####.#
#.#.#.....
#.........
...#......
#.#......#
#..#.#...#

Tile 3457:
.#...#.#.#
.........#
........#.
#......#..
......#...
#.....#...
.##....#..
..#..##.#.
.....#..#.
.#...#.##.

Tile 3719:
.#.#...#.#
#.#...#...
#........#
.........#
#...#.##..
###......#
.##.....#.
.#......#.
.#.##....#
##.##.####

Tile 3307:
##.####...
#...#....#
#.###...##
#...#.#.#.
........#.
##..#..###
..........
.........#
#......#.#
##..###...

Tile 3853:
.......###
#.#....#..
#.#..#...#
.#.#.#....
#...#.....
....#....#
.#....#...
........#.
..........
##..#..#.#

Tile 3271:
#...#..#..
.#.#...#.#
#.........
.#..#..#..
.........#
.#...##..#
.##......#
##..#...#.
#...###...
..####.###

Tile 1249:
.#.#..###.
#........#
#......#..
#.#....#.#
.#.......#
......#...
..#..#....
..#.....#.
..#..#..##
..###.#...

Tile 1429:
#.#.####.#
#.........
...#...#..
.........#
...#......
##.#......
.........#
....#....#
#....#...#
#.###..###

Tile 1951:
##....###.
....###..#
.........#
...#.....#
##.......#
#....##..#
...#...##.
#.##...#.#
..........
#####.##.#

Tile 2111:
#########.
###.....#.
#..#...##.
#.......##
#...#.....
...#..#..#
#.#..#...#
#..#.....#
#.......#.
##...##.#.

Tile 2633:
.###..##..
###...#...
.#........
#.#......#
#.........
..#......#
#..#...#.#
..#.......
#..###..##
..#..###.#

Tile 2749:
..####....
..........
.......#..
.#.#...#..
...##.#..#
..#..##...
..#...#..#
....###..#
#......#..
.##.##.#.#

Tile 1193:
#########.
#.#...#...
...#......
....###...
.#...#....
...#......
..##.###.#
#.##......
#..#......
.####.##..

Tile 2377:
.####.##.#
##.##.....
..#..#..##
.#.##.....
##.......#
.#.....#..
...#.#...#
..##.....#
##.......#
..########

Tile 3187:
.#.###..##
..#.......
...#.#...#
....##....
#...#..#.#
##.#.#..##
..........
.........#
#....##..#
#..#####.#

Tile 2803:
..#.#...#.
.........#
...#...#..
........#.
....#..###
#..#....##
#.....#..#
.###.....#
...#......
##...##...

Tile 1549:
##...###.#
#....##...
.........#
....#....#
.......##.
.......###
#.#.#.....
#...#.....
#..#.#....
##..####.#

Tile 2531:
###..#..##
#......#..
....#...##
..#.....##
##.#.#..#.
.........#
...#......
##.#......
..#...#.#.
....##..#.

Tile 1481:
...##..###
#.#.....##
..#.......
.#.....##.
###.......
...#.....#
##........
#.##....#.
.........#
.#..#....#

Tile 1931:
...#...###
.....###..
.........#
..........
#..##....#
.....#....
.#....#...
#..#.....#
#.........
#.###.##.#

Tile 1217:
..######.#
..#......#
..#...#..#
#.........
..........
....#.##.#
......#.#.
.....#..##
##.......#
#..###.#.#

Tile 3137:
....#.###.
#..#.....#
.......#.#
#...#.#..#
.........#
#.####..#.
........#.
#.#.......
##..#...##
.##.#.#.##

Tile 2657:
#..#...###
.........#
...##..#..
###...#...
#...#..#.#
##........
....#..#..
..........
#...##....
...##.....

Tile 2939:
...#..###.
.###....#.
#........#
#.###.#...
..........
..#.......
#..#.....#
......#..#
#.........
######.#..

Tile 2273:
###.###..#
###....#..
..#.......
##....#..#
....#.....
#.#.......
.......##.
..........
..#.......
#.##.#.#..

Tile 2029:
.####.#.#.
.......#.#
#..##....#
#...#..#..
#....#.##.
..#......#
.#........
#.....#.#.
##........
#.#...####

Tile 1559:
..##.#.###
........#.
..#......#
..#.......
..........
.........#
#..##.....
.....#.#.#
..........
##.#.##...

Tile 1181:
....####..
#.#.......
.#.##.....
##.#.....#
#.#....#.#
#.....#...
....#.....
#.#......#
#..#......
....###..#

Tile 3221:
.#####..#.
#......##.
......###.
#......###
.........#
.##....#.#
...#..#...
...#.#.#..
#..##.....
#..#....#.

Tile 2467:
#..#######
.........#
#.........
.#..#.#...
...#...##.
#.#...#...
.........#
....##...#
#..#.#..#.
...#...#.#

Tile 2389:
####..##..
#.....#..#
....#.....
#.#.......
..#..#...#
......#.##
.....##...
....#.#...
##.....#..
##.......#

Tile 1823:
..#.....##
##.#.#...#
#...#.#..#
..........
....#.#.#.
...##.#.#.
.....#...#
...#.#.#..
....#....#
.#..#.....

Tile 1747:
...##...##
.#......#.
.........#
...#...#..
#.#.#.#..#
#........#
#.........
#....#....
#......#.#
##..##....

Tile 2551:
#...####.#
..#..#....
........#.
..#.......
.....#....
####.....#
.#.#..#..#
#.......##
.........#
....#.....

Tile 2707:
#.####.###
.........#
...#...#..
##......#.
#....#...#
#.........
#.#....#.#
#..#.....#
........##
...###...#

Tile 3229:
.##.#....#
.....#.#.#
#.#.......
#........#
.........#
..........
#.#...#.##
.......#.#
........#.
#....#..##

Tile 2617:
####.#..#.
#....#...#
...#.....#
#.....##.#
.........#
#.#...##.#
..........
#..#.#..##
.#...#.#.#
.#.##.....

Tile 3323:
#.###.#.#.
##........
......##..
.#.##.....
#......#.#
.........#
........##
.....#...#
#.......##
.####.#.#.

Tile 3989:
###.##.##.
#........#
#........#
#.#....#.#
#.....#..#
..##...#..
..##.....#
#....#....
#.#..####.
#.##...###

Tile 2399:
#.#.#.##.#
#...####.#
#..#.##..#
..........
#....#....
#....#....
##..#...##
..#.#.....
..#..#..##
..###.#.#.

Tile 3001:
#.#..#....
....#....#
#........#
###..##..#
..#..###..
##....#.##
...#..#..#
#.........
.......#..
#.....##..

Tile 2663:
####.##..#
#.#......#
###.#.....
.....##.##
.#.......#
....#..#.#
.....##...
......#...
#.#.......
#####..#..

Tile 3947:
###..#.#.#
#.........
.#....#...
##.....#.#
.##....##.
#.....#...
.#........
...#..##.#
#.#......#
#..##.##.#

Tile 3347:
#.#.#.#.##
..##.#....
.##..#..##
.#.#.##...
#.#..###..
##....#...
.....#.#..
#..#......
##....#...
....#..##.

Tile 2683:
#####.##..
###.....#.
##......##
........#.
#.........
..........
#......#.#
#...#....#
#.#.......
...#...#.#

Tile 3019:
###....##.
...##...##
#...##..##
##..#..#..
.#....#...
.#..#.....
......####
..#.....##
.#.#....##
##..###...

Tile 2753:
..#.#....#
#...#.....
#........#
##.##...##
..#.......
........#.
..#......#
#.#.##...#
..##......
#.....##..

Tile 2833:
##.#.####.
#.#...#.##
.....##...
#.......##
.#.......#
.......#..
#.........
.........#
.##......#
.##.##.#.#

Tile 2713:
#.#..#.#..
##..#.#...
##.#..##.#
#....#....
..#......#
#.....##.#
.......###
#.......##
##.......#
..#.##....

Tile 3251:
....###..#
..##.....#
#.##.#...#
##........
.#.......#
#.#.......
#..##.....
...#.##...
...#......
..######.#

Tile 3257:
...###..#.
#.##.....#
#...##...#
#.....#...
........##
#........#
.#...#....
.#...#.#..
#.#...##.#
.#..###.#.

Tile 2909:
..#####.#.
#.....##..
.....##.##
...#.....#
.......###
#.....#..#
...#......
.#.......#
#..#.....#
###..#.#.#

Tile 3793:
...###..#.
.#........
#..#.#.#..
#..#......
.#.......#
#........#
##........
...#..##..
#......#..
..#.###.##

Tile 1447:
...#.#.###
#..#.....#
#...#....#
.........#
#......#.#
##.......#
#.#.......
##........
.#.##..#..
..#..####.

Tile 3877:
#.......##
#.##....##
#.........
..#.##....
#..#.#...#
...#......
.###..#...
#.#....###
..........
#.##....#.

Tile 3499:
.####.##.#
#.....#..#
#.....#.##
.........#
#.......##
..........
#.........
#...#...#.
#.........
####..##.#

Tile 1667:
#.#.#...##
#.........
..#...#.##
....#.#.##
...#...#..
.....#....
#....##...
......##..
#..#.....#
.#######.#

Tile 3931:
#####....#
.#.....#..
#...#..##.
#..#.#...#
..........
.#........
.#.......#
#........#
..#.#....#
#...#.##.#

Tile 3593:
.##...##..
..#.#####.
##..#.##..
##........
.........#
......#...
....#.....
#..#.#.#..
..#.......
##.#..##..

Tile 1847:
###.#.#..#
#.......##
#.#.....##
..##.#...#
#....##...
#..##.....
#.#.....#.
......#..#
#....#....
#...##..##'''

def rotate(string):
    newstring = ""
    for x in range(length):
        newstring+=string[length-1-x::length]
    return newstring

def flip(string):
    newstring = ""
    for x in range(length):
        newstring+=string[x*length:(x+1)*length][::-1]
    return newstring
def str_to_tile(string):
    size = int(len(string)**0.5)
    new = ""
    for x in range(size):
        new+=string[x*size:(x+1)*size]+"\n"
    print(new)
def shave(string):
    new = ""
    for x in range(1,length-1):
        new+=string[1+length*x:length*x+length-1]
    return new

def printline(string):
    size = 10
    Box = []
    for x in range(size):
        new = ""
        for y in range(size):
            new+=string[size*(y*size+x):size*(y*size+x)+10]
        Box.append(new)
    for x in Box:
        print(x)

def makeBigGrid(string):
    size = 8
    for x in range(size):
        new = ""
        for y in range(12):
            new+=string[size*(y*size+x):size*(y*size+x)+size]
        BigGrid.append(new)
def rotateBigGrid(Lst):
    string = "".join(Lst)
    newstring = ""
    size = len(Lst)
    for x in range(size):
        newstring+=string[size-1-x::size]
    New = []
    for x in range(size):
        New.append(newstring[x*size:(x+1)*size])
    return New
def flipBigGrid(Lst):
    New = list(map(lambda x: x[::-1],Lst))
    return New

def add(tup,tup2):
    return (tup[0]+tup2[0],tup[1]+tup2[1])

def rotatetup(tup):
    return (tup[1],-tup[0])
def fliptup(tup):
    return (-tup[0],tup[1])

L = inp.split("\n\n")
D = {}
Tiles = {}
for tile in L:
    Lines = tile.split("\n")
    num = int(Lines[0][5:-1])
    string = "".join(Lines[1:])
    Tiles[num] = string
    length = len(Lines)-1
    D[num] = []
    D[num].append(string[:length])
    D[num].append(string[length-1::length])
    D[num].append(string[-1:-length-1:-1])
    D[num].append(string[-length::-length])



answer = 1
Adj = {}

for tile in D:
    count = 0
    Adj[tile] = []
    for x in range(4):
        for newtile in D:
            if newtile == tile:
                continue
            if D[tile][x] in D[newtile] or D[tile][x][::-1] in D[newtile]:
                Adj[tile].append(newtile)
                count+=1
    if count == 2:
        print(tile)
        print(Adj[tile])


#str_to_tile(Tiles[1543])
#str_to_tile(rotate(Tiles[1543]))
#str_to_tile(flip(Tiles[1543]))

BigGrid = []

start = 1543
current = start
bigstring = shave(Tiles[current])
while True:
    found = False
    for newtile in Adj[current]:
        side = D[current][1]
        if side[::-1] in D[newtile]:
            i = D[newtile].index(side[::-1])
            for x in range((1+i)%4):
                Tiles[newtile] = rotate(Tiles[newtile])
                D[newtile].append(D[newtile].pop(0))
            bigstring+= shave(Tiles[newtile])
            #print(newtile)
            current = newtile
            found = True
            #print("NEET")
            break
        elif side in D[newtile]:
            i = D[newtile].index(side)
            for x in range((3+i)%4):
                Tiles[newtile] = rotate(Tiles[newtile])
                D[newtile].append(D[newtile].pop(0))
            Tiles[newtile] = flip(Tiles[newtile])
            D[newtile][1],D[newtile][3] = D[newtile][3],D[newtile][1]
            D[newtile] = list(map(lambda x: x[::-1],D[newtile]))
            bigstring+= shave(Tiles[newtile])
            #print(newtile)
            current = newtile
            found = True
            #print("YEET")
            break
    if found == False:
        print(current,"CURRENT")
        makeBigGrid(bigstring)
        #printline(bigstring)
        bigstring = ""
        current = start
        running = False
        for newtile in Adj[current]:
            side = D[current][2]
            if side[::-1] in D[newtile]:
                i = D[newtile].index(side[::-1])
                for x in range(i % 4):
                    Tiles[newtile] = rotate(Tiles[newtile])
                    D[newtile].append(D[newtile].pop(0))
                bigstring += shave(Tiles[newtile])
                #print(newtile)
                current = newtile
                running = True
                #print("COOL")
                break
            elif side in D[newtile]:
                i = D[newtile].index(side)
                for x in range(i % 4):
                    Tiles[newtile] = rotate(Tiles[newtile])
                    D[newtile].append(D[newtile].pop(0))
                Tiles[newtile] = flip(Tiles[newtile])
                D[newtile][1], D[newtile][3] = D[newtile][3], D[newtile][1]
                D[newtile] = list(map(lambda x: x[::-1], D[newtile]))
                bigstring += shave(Tiles[newtile])
                #print(newtile)
                current = newtile
                running = True
                #print("BEANS")
                break
        start = current
        #str_to_tile(Tiles[current])
        if running == False:
            break



Monster = set()
monster = '''                  # 
#    ##    ##    ###
 #  #  #  #  #  #   '''


m = monster.split("\n")
mlength = len(m[0])
for y in range(len(m)):
    for x in range(mlength):
        if m[y][x] == "#":
            Monster.add((x,y))
print(Monster)

BigGrid = rotateBigGrid(BigGrid)
size = len(BigGrid[0])
S = set()
Seen = set()
for y in range(len(BigGrid)):
    for x in range(size):
        if BigGrid[y][x] == "#":
            S.add((x, y))
print(S)
for turn in range(2):
    for times in range(4):
        Monster = set(map(rotatetup,Monster))
        for y in range(-20,200):
            for x in range(-20,200):
                running = True
                B = set()
                for coord in Monster:
                    new = add(coord,(x,y))
                    B.add(new)
                    if new not in S:
                        running = False
                        break
                if running:
                    Seen|=B
    Monster = set(map(fliptup,Monster))

print(len(S))
print(len(S-Seen))
#1777


'''
L = inp.split("\n\n")
D = {}
Sides = set()
for tile in L:
    Lines = tile.split("\n")
    num = int(Lines[0][5:-1])
    string = "".join(Lines[1:])
    length = len(Lines)-1
    D[num] = []
    D[num].append(string[:length])
    D[num].append(string[-1:-length-1:-1])
    D[num].append(string[length-1::length])
    D[num].append(string[-length::-length])

answer = 1
for tile in D:
    count = 0
    for x in D[tile]:
        for newtile in D:
            if newtile == tile:
                continue
            if x in D[newtile] or x[::-1] in D[newtile]:
                count+=1
                break
    if count == 2:
        print(tile)
        answer*=tile
print(answer)
'''